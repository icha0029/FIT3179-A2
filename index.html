<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Visualization Dashboard</title>
    
    <!-- Import Vega, Vega-Lite, and Vega-Embed libraries from CDN -->
    <!-- These libraries enable interactive data visualizations -->
    <script src="https://cdn.jsdelivr.net/npm/vega@5.25.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.16.3"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.24.0"></script>
    
    <!-- CSS Styles for the entire dashboard -->
    <style>
        /* Body - Sets page background and basic styling */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 50%, #90caf9 100%);
            min-height: 100vh;
        }
        
        /* Main container - Centers content and sets max width */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background-color: transparent;
            padding: 30px;
            border: none;
            box-shadow: none;
        }
        
        /* Main heading style */
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 40px;
        }
        
        /* Chart section wrapper */
        .chart {
            margin: 30px 0;
            padding: 20px;
            border: none;
            background-color: transparent;
        }
        
        /* Wrapper for visualizations with floating text boxes */
        .map-wrapper {
            position: relative;
            width: 100%;
            background-color: transparent;
            padding: 20px;
            border: none;
            box-sizing: border-box;
            min-height: 450px;
        }
        
        /* Centers the choropleth map visualization */
        #vis {
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        /* Force transparent backgrounds on all visualization elements */
        #vis, #vis *, #vis canvas, #vis svg,
        #barchart, #barchart *, #barchart canvas, #barchart svg,
        #columnchart, #columnchart *, #columnchart canvas, #columnchart svg,
        #scatterplot, #scatterplot *, #scatterplot canvas, #scatterplot svg {
            background-color: transparent !important;
            background: transparent !important;
        }
        
        .vega-embed, .vega-embed *, .vega-embed canvas, .vega-embed svg,
        details summary, details[open] {
            background-color: transparent !important;
            background: transparent !important;
        }
        
        /* Left text box for choropleth map - "What the graph shows" */
        .text-box {
            position: absolute;
            left: 40px;
            top: 100px;
            width: 280px;
            background-color: transparent;
            padding: 20px;
            border-radius: 8px;
            line-height: 1.6;
            font-size: 13px;
            color: #333;
            box-shadow: none;
            z-index: 10;
            text-align: center;
        }
        
        /* Right text box for choropleth map - "What the pattern means" */
        .text-box-right {
            position: absolute;
            right: 40px;
            top: 100px;
            width: 280px;
            background-color: transparent;
            padding: 20px;
            border-radius: 8px;
            line-height: 1.6;
            font-size: 13px;
            color: #333;
            box-shadow: none;
            z-index: 10;
            text-align: center;
        }
        
        /* Top text box for bar chart and scatter plot */
        .text-box-barchart-top {
            position: absolute;
            right: 40px;
            top: -50px;
            width: 280px;
            background-color: transparent;
            padding: 20px;
            border-radius: 8px;
            line-height: 1.6;
            font-size: 13px;
            color: #333;
            box-shadow: none;
            z-index: 10;
            text-align: center;
        }
        
        /* Bottom text box for bar chart and scatter plot */
        /* Default: scatterplot and others remain closer */
        .text-box-barchart-bottom {
            position: absolute;
            right: 40px;
            top: 140px;
            width: 280px;
            background-color: transparent;
            padding: 20px;
            border-radius: 8px;
            line-height: 1.6;
            font-size: 13px;
            color: #333;
            box-shadow: none;
            z-index: 10;
            text-align: center;
        }

        /* For bar chart only, move bottom text box further down */
        .chart .map-wrapper:nth-of-type(1) .text-box-barchart-bottom {
            top: 200px; /* Minor spread for bar chart */
        }

        /* For scatterplot only, move bottom text box closer */
        .chart:last-of-type .map-wrapper .text-box-barchart-bottom {
            top: 160px; /* Further apart for scatterplot */
        }
        
        /* Paragraph spacing in text boxes */
        .text-box p, .text-box-right p, .text-box-barchart-top p, .text-box-barchart-bottom p {
            margin-bottom: 12px;
            text-align: center;
        }
        
        /* Remove bottom margin from last paragraph in text boxes */
        .text-box p:last-child, .text-box-right p:last-child, .text-box-barchart-top p:last-child, .text-box-barchart-bottom p:last-child {
            margin-bottom: 0;
        }
        
        /* Bold text styling in text boxes */
        .text-box strong, .text-box-right strong, .text-box-barchart-top strong, .text-box-barchart-bottom strong {
            text-align: center;
        }
        
        /* Chart titles (h2 headings) */
        h2 {
            color: #000;
            margin-top: 0;
            margin-bottom: 10px;
            text-align: center;
            font-weight: bold;
        }
        
        /* Chart subtitles (italic text below titles) */
        .subtitle {
            color: #000;
            font-size: 16px;
            line-height: 1.5;
            margin-top: 0;
            margin-bottom: 20px;
            font-style: italic;
            text-align: center;
        }
        
        /* Force transparent backgrounds on all Vega visualization elements */
        /* This ensures the blue gradient shows through the charts */
        #vis, #vis *, #vis canvas, #vis svg,
        #barchart, #barchart *, #barchart canvas, #barchart svg,
        #columnchart, #columnchart *, #columnchart canvas, #columnchart svg,
        #scatterplot, #scatterplot *, #scatterplot canvas, #scatterplot svg {
            background-color: transparent !important;
            background: transparent !important;
        }
        
        .vega-embed, .vega-embed *, .vega-embed canvas, .vega-embed svg,
        details summary, details[open] {
            background-color: transparent !important;
            background: transparent !important;
        }
    </style>
</head>
<body>
    <!-- Main container holds all dashboard content -->
    <div class="container">
        <!-- Dashboard main title -->
        <h1>Australian Water Usage Visualization</h1>
        <p style="text-align: center; font-size: 12px; color: #555; margin-top: -30px; margin-bottom: 40px;">By Ishaan Chandel 33861625</p>
        
        <!-- ========== SECTION 1: CHOROPLETH MAP ========== -->
        <!-- Shows water sourced per 1,000 people by Australian state -->
        <h2>Where Water Is Pulled the Hardest Across Australia</h2>
        <p class="subtitle">Which states source the most water per 1,000 people and what this reveals about how we live.</p>
        
        <!-- Wrapper for map with floating text annotations -->
        <div class="map-wrapper">
                <!-- Left annotation box explaining what the map shows -->
                <div class="text-box">
                    <p><strong>What the graph shows:</strong></p>
                    <p>This map compares how much water each Australian state sources per 1,000 people through its urban water utilities. Darker shades represent higher per-capita sourcing, highlighting where utilities need to supply more water for each resident.</p>
                    <p>States on the east coast New South Wales, Victoria and Queensland sit in a narrow band around 65–70 ML per 1,000 people, while others show stronger variations.</p>
                </div>
                
                <div class="text-box-right">
                    <p><strong>What The Pattern Means:</strong></p>
                    <p>The elevated values in Northern Territory (≈149 ML per 1,000 people) and Western Australia (≈94 ML per 1,000 people) show how geography, climate and long-distance networks drive higher water sourcing per person.</p>
                    <p>Both states have smaller, more dispersed populations, meaning utilities must move water farther and compensate for greater losses. In contrast, densely populated states like Victoria (≈64 ML), New South Wales (≈69 ML) and Queensland (≈68 ML) operate compact, efficient systems where large urban communities share infrastructure, resulting in much lower per-capita demand.</p>
                </div>
                
                <div id="vis"></div>
            </div>
            
            <!-- Bar Chart -->
            <div class="chart">
                <h2>Top Urban Water Utilities by Population Served</h2>
                <p class="subtitle">Largest water utilities in Australia ranked by the number of people they serve.</p>
                
                <div class="map-wrapper">
                    <div class="text-box-barchart-top">
                        <p><strong>What the graph shows:</strong></p>
                        <p>This bar chart ranks Australia's largest urban water utilities by the number of people they supply. Each bar represents one utility, with the bar length showing the population receiving water services and the colour indicating the state or territory.</p>
                        <p>Utilities like Sydney Water, Yarra Valley Water and Urban Utilities sit at the top, while smaller regional or city systems appear lower on the chart.</p>
                    </div>
                    
                    <div class="text-box-barchart-bottom">
                        <p><strong>What the pattern means:</strong></p>
                        <p>These utility sizes help explain the choropleth map. Large, dense utilities in NSW, Victoria and Queensland supply millions of people efficiently, which is why these states show lower per-capita water sourcing.</p>
                        <p>In contrast, WA and the NT rely on smaller, more dispersed utilities, so each resident requires more water to be sourced and moved, producing the higher per-capita values seen on the map.</p>
                    </div>
                    
                    <div id="barchart"></div>
                </div>
            </div>
            
            <!-- Column Chart -->
            <div class="chart">
                <h2>Water Supply Trends by State Over Time</h2>
                <p class="subtitle">Total urban water supplied (ML) across Australian states and territories over the years.</p>
                
                <div class="map-wrapper">
                    <div class="text-box-barchart-top">
                        <p><strong>What the graph shows:</strong></p>
                        <p>This graph displays how much urban water each Australian state and territory supplies in total each year. The bars show total water supplied in megalitres (ML), and the dropdown lets you switch between years so you can directly compare the state-by-state pattern for any selected year.</p>
                    </div>
                    
                    <div class="text-box-barchart-bottom">
                        <p><strong>What the pattern means:</strong></p>
                        <p>For every year you choose in the dropdown, states with larger populations like New South Wales, Victoria and Queensland consistently supply the highest total volumes, while Tasmania, the ACT and the Northern Territory supply much less. This confirms that overall water supply closely tracks population size, which helps explain the per-capita patterns seen in the choropleth map and the relationships shown in the scatter plot.</p>
                    </div>
                    
                    <div id="columnchart"></div>
                </div>
            </div>
            
            <!-- Scatter Plot -->
            <div class="chart">
                <h2>Population vs Water Received by State</h2>
                <p class="subtitle">Exploring the relationship between population size and total water received across Australian states.</p>
                
                <div class="map-wrapper">
                    <div class="text-box-barchart-top">
                        <p><strong>What the plot shows:</strong></p>
                        <p>The scatter plot compares how many people each state's urban water systems serve with how much water they receive overall. Each point is a state: moving right means serving more people, and moving up means receiving a larger total volume of water.</p>
                    </div>
                    
                    <div class="text-box-barchart-bottom">
                        <p><strong>What the pattern means:</strong></p>
                        <p>Most states sit on a rough upward trend, where more people generally means more water supplied. States that sit higher relative to their population are effectively supplying more water per person, matching the darker per-capita sourcing seen on the choropleth map, while states closer to the line align with more efficient, lower per-capita use.</p>
                    </div>
                    
                    <div id="scatterplot"></div>
                </div>
            </div>
            
            <!-- Residential Split Chart -->
            <div class="chart">
                <h2>Residential vs Non-Residential Water Supply by State</h2>
                <p class="subtitle">Comparing the proportion of water supplied to residential and non-residential customers across states.</p>
                
                <div class="map-wrapper">
                    <div class="text-box-barchart-top">
                        <p><strong>What the graph shows:</strong></p>
                        <p>This graph shows how each state's urban water supply is divided between residential and non-residential users. Each bar represents a state, split into household use and commercial/industrial use, allowing easy comparison of usage shares across regions.</p>
                    </div>
                    
                    <div class="text-box-barchart-bottom">
                        <p><strong>What the pattern means:</strong></p>
                        <p>Residential use dominates nationwide, making up roughly 60–70% of total demand in every state. Queensland has the highest residential share, while NSW has the largest non-residential component due to its strong commercial sector. The consistent split across states shows that differences in total water demand are driven more by population, climate and infrastructure than by how water is allocated between households and businesses.</p>
                    </div>
                    
                    <div id="residentialsplit"></div>
                </div>
            </div>
            
            <!-- Recycled Water Chart -->
            <div class="chart">
                <h2>Recycled Water as Share of Total Supply by State</h2>
                <p class="subtitle">Percentage of total urban water supplied that comes from recycled sources.</p>
                
                <div class="map-wrapper">
                    <div class="text-box-barchart-top">
                        <p><strong>What the graph shows:</strong></p>
                        <p>This graph shows the percentage of each state's total urban water supply that comes from recycled water. Each bar represents how much of the water used by that state is sourced from recycling rather than traditional supplies such as dams or groundwater.</p>
                    </div>
                    
                    <div class="text-box-barchart-bottom">
                        <p><strong>What the pattern means:</strong></p>
                        <p>South Australia stands out with a very high recycling rate, reflecting long-term investment in reuse technologies. Western Australia and Victoria also show significant recycling, while states like Tasmania and the Northern Territory rely very little on recycled water. These differences highlight how states facing drier climates or supply pressure make greater use of recycled water, adding a sustainability dimension that complements the earlier per-capita and total supply findings.</p>
                    </div>
                    
                    <div id="recycledwater"></div>
                </div>
            </div>
            
            <!-- Overall Conclusion -->
            <div class="chart">
                <h2>Overall Conclusion</h2>
                <div style="padding: 20px 0; line-height: 1.8; text-align: center;">
                    <p>This visualisation project shows how urban water use in Australia is shaped by population density, climate conditions and infrastructure efficiency. The choropleth map revealed strong geographic differences in per capita sourcing, with the Northern Territory and Western Australia using far more water per person because of dispersed populations and hotter climates. Population based graphs, including the utility bar chart, state supply trends and the population and water scatter plot, confirmed that overall water demand increases as population size increases, while efficiency varies across regions.</p>
                    
                    <p>Additional breakdowns such as the residential and non residential split and recycled water percentages showed that households drive most water consumption nationally and that recycling uptake differs widely between states. Together, these visuals show that Australia's water demand patterns reflect structural, environmental and demographic factors that will continue to shape future water planning and sustainability strategies.</p>
                </div>
            </div>
            
            <!-- Data Sources -->
            <div class="chart">
                <h2>Data Sources</h2>
                <div style="padding: 20px 0; line-height: 1.8; text-align: center;">
                    <p>All data used in this project comes from the Australian Bureau of Statistics and the Bureau of Meteorology.</p>
                    
                    <p><strong>ABS Water Account Australia</strong><br>
                    <a href="https://www.abs.gov.au/statistics/environment/environmental-accounts/water-account-australia/latest-release" target="_blank">https://www.abs.gov.au/statistics/environment/environmental-accounts/water-account-australia/latest-release</a><br>
                    <a href="https://www.abs.gov.au/statistics/environment/environmental-accounts/water-account-australia/2018-19" target="_blank">https://www.abs.gov.au/statistics/environment/environmental-accounts/water-account-australia/2018-19</a><br>
                    <a href="https://www.abs.gov.au/statistics/environment/environmental-accounts/water-account-australia" target="_blank">https://www.abs.gov.au/statistics/environment/environmental-accounts/water-account-australia</a></p>
                    
                    <p><strong>Bureau of Meteorology National Performance Report</strong><br>
                    <a href="https://www.bom.gov.au/water/npr/" target="_blank">https://www.bom.gov.au/water/npr/</a><br>
                    <a href="https://www.bom.gov.au/water/npr/npr_2020-21.shtml" target="_blank">https://www.bom.gov.au/water/npr/npr_2020-21.shtml</a></p>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Load choropleth map
        vegaEmbed('#vis', 'map.json', {
            "actions": false,
            "renderer": "svg"
        }).then(function(result) {
            console.log('Map loaded successfully:', result);
        }).catch(function(error) {
            console.error('Error loading map:', error);
            alert('Error loading map. Check console for details.');
        });
        
        // Load bar chart
        vegaEmbed('#barchart', 'barchart.json', {
            "actions": false,
            "renderer": "svg"
        }).then(function(result) {
            console.log('Bar chart loaded successfully:', result);
        }).catch(function(error) {
            console.error('Error loading bar chart:', error);
            alert('Error loading bar chart. Check console for details.');
        });
        
        // Load column chart
        vegaEmbed('#columnchart', 'column_chart.json', {
            "actions": false,
            "renderer": "svg"
        }).then(function(result) {
            console.log('Column chart loaded successfully:', result);
        }).catch(function(error) {
            console.error('Error loading column chart:', error);
            alert('Error loading column chart. Check console for details.');
        });
        
        // Load scatterplot
        vegaEmbed('#scatterplot', 'scatterplot.json', {
            "actions": false,
            "renderer": "svg"
        }).then(function(result) {
            console.log('Scatterplot loaded successfully:', result);
        }).catch(function(error) {
            console.error('Error loading scatterplot:', error);
            alert('Error loading scatterplot. Check console for details.');
        });
        
        // Load residential split chart
        vegaEmbed('#residentialsplit', 'residential_split.json', {
            "actions": false,
            "renderer": "svg"
        }).then(function(result) {
            console.log('Residential split chart loaded successfully:', result);
        }).catch(function(error) {
            console.error('Error loading residential split chart:', error);
            alert('Error loading residential split chart. Check console for details.');
        });
        
        // Load recycled water chart
        vegaEmbed('#recycledwater', 'recycled_water.json', {
            "actions": false,
            "renderer": "svg"
        }).then(function(result) {
            console.log('Recycled water chart loaded successfully:', result);
        }).catch(function(error) {
            console.error('Error loading recycled water chart:', error);
            alert('Error loading recycled water chart. Check console for details.');
        });
    </script>
</body>
</html>